var Lollipop=function(e){var t;var n=300,r=400;var i=false,s=false,o=0,u=0;var a,f,l=0,c=0;var h,p,d,v,m;var g,y,b,w;var E,S,x;var T={title:"Lollipop!",close:"X",top:"100",left:"180",href:"http://www.karmicbee.com"};var N=function(e,t,n){e.addEventListener?e.addEventListener(t,n,false):e.attachEvent("on"+t,n)};var C=function(){h=document.createElement("div");p=h.cloneNode(false);d=h.cloneNode(false);v=document.createElement("iframe");m=document.createElement("span");E=h.cloneNode(false);g=document.createElement("td");y=document.createElement("td");b=document.createElement("tr");w=document.createElement("table");m.className="lolli_title";d.className="lolli_close";g.style.width="20px";p.className="lolli_header";v.className="lolli_iframe";v.id="lolli_iframe"};var k=function(){headerHeight=p.offsetHeight+20;popupHeight=h.offsetHeight;v.style.height=popupHeight-headerHeight};C.prototype.setupHeader=function(){p.innerHTML="";m.innerHTML=T["title"];y.appendChild(m);N(y,"mousedown",this.dragMouseDownListener);d.innerHTML=T["close"];g.appendChild(d);N(g,"click",this.closeListener);b.appendChild(y);b.appendChild(g);w.style.width="100%";w.appendChild(b);p.appendChild(w)};C.prototype.closeListener=function(e){h.parentNode.removeChild(h)};C.prototype.dragMouseDownListener=function(e){o=e.clientX;u=e.clientY;S=h.cloneNode(false);S.innerHTML="";S.className="lolli_popup";S.style.opacity="0.5";document.body.appendChild(S);i=true};C.prototype.dragMouseMoveListener=function(e){if(!i)return false;T["top"]=parseInt(S.style.top);T["left"]=parseInt(S.style.left);S.style.top=T["top"]+e.clientY-u;S.style.left=T["left"]+e.clientX-o;o=e.clientX;u=e.clientY};C.prototype.dragMouseUpListener=function(e){i=false;h.style.top=S.style.top;h.style.left=S.style.left;if(S.parentNode!==null)S.parentNode.removeChild(S)};C.prototype.resizeMouseDownListener=function(e){document.body.className="noselect";S=h.cloneNode(false);S.innerHTML="";S.className="lolli_popup";S.style.opacity="0.5";x=h.cloneNode(false);x.innerHTML="";x.style.opacity="0.0";document.body.appendChild(S);document.body.appendChild(x);s=true};C.prototype.resizeMouseMoveListener=function(e){if(!s)return false;l=e.clientX-parseInt(T["left"]);c=e.clientY-parseInt(T["top"]);S.style.height=c+"px";S.style.width=l+"px"};C.prototype.resizeMouseUpListener=function(e){if(!s)return false;document.body.className="";s=false;h.style.width=S.style.width;h.style.height=S.style.height;k();if(S.parentNode!==null)S.parentNode.removeChild(S);if(x!==undefined&&x.parentNode!==null)x.parentNode.removeChild(x)};C.prototype.init=function(e){this.setProp(e);h.className="lolli_popup bxshd";h.style.top=T["top"]+"px";h.style.left=T["left"]+"px";document.body.appendChild(h);this.setupHeader();h.appendChild(p);h.appendChild(v);if("object"==typeof document.getElementById("lolli_iframe").contentWindow.document){document.getElementById("lolli_iframe").contentWindow.document.write("<html><body><div style='width:100%; "+"color: gray; text-align: center; line-height: 100%;'><i style='padding-top: 100px;"+"display: block;'>loading...</i></div></body></html>")}else{try{v.contentDocument.write("<html><body><div style='width:100%; "+"color: gray; text-align: center; line-height: 100%;'><i style='padding-top: 100px;"+"display: block;'>loading...</i></div></body></html>")}catch(t){}}this.setUrl(T["href"]);k();E.className="lolli_drag";N(E,"mousedown",this.resizeMouseDownListener);N(document,"mouseup",this.resizeMouseUpListener);N(document,"mousemove",this.resizeMouseMoveListener);h.appendChild(E);N(document,"mousemove",this.dragMouseMoveListener);N(document,"mouseup",this.dragMouseUpListener)};C.prototype.setUrl=function(e){v.setAttribute("src",e)};C.prototype.setProp=function(e){for(var t in e){T[t]=e[t]}};return function(){if(!t){t=new C}return t}}()
